<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LABIIZ - Almacen</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              "lab-purple": "rgb(149,47,87)",
              "lab-table": "rgb(255,255,255)",
              "lab-light-purple": "#952f57",
            },
          },
        },
      };
    </script>
  </head>
  <body class="bg-gray-100">
    <div class="flex h-screen">
      <!-- Sidebar -->
      <aside class="w-64 bg-white shadow-lg">
        <div class="p-6 border-b text-center">
          <h1 class="text-6xl font-bold text-gray-800">LABIIZ</h1>
          <p class="text-gray-500">UPIIZ-IPN</p>
          <div class="flex justify-center mt-2">
            <img
              src="{{ url_for('static', filename='ingalim.png') }}"
              alt="Logo grande LABIIZ"
              class="w-24 h-24 object-contain"
            />
          </div>
        </div>
        <nav class="mt-6">
          <div class="px-4 space-y-2">
            <a
              href="/dashboard"
              class="flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors"
            >
              <i class="fas fa-home"></i><span>Inicio</span>
            </a>
            <a
              href="/almacen"
              class="flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors"
            >
              <i class="fas fa-boxes"></i><span>Almac√©n</span>
            </a>
            <a
              href="/citas"
              class="flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors"
            >
              <i class="fas fa-vial"></i><span>Citas de laboratorio</span>
            </a>
            <a
              href="/inventario"
              class="flex items-center space-x-3 px-4 py-3 bg-lab-purple text-white rounded-lg"
            >
              <i class="fas fa-chart-bar"></i><span>Inventario</span>
            </a>
            <a
              href="/tickets"
              class="flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors"
            >
              <i class="fas fa-ticket-alt"></i><span>Vales de laboratorio</span>
            </a>
          </div>
        </nav>
        <div class="absolute bottom-4 left-4">
          <button
            class="flex items-center space-x-2 text-gray-500 hover:text-gray-700"
          >
            <i class="fas fa-question-circle"></i
            ><span class="text-sm">Ayuda</span>
          </button>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="flex-1 overflow-hidden">
        <header
          class="bg-lab-purple text-white px-6 py-4 flex justify-between items-center"
        >
          <h2 class="text-xl font-semibold">Inventario</h2>
          <div class="flex items-center space-x-4">
            <span class="text-sm">{{ usuario }}</span>
            <div class="w-8 h-8 bg-white rounded-full flex items-center justify-center">
                <i class="fas fa-user text-[#852747]"></i>
            </div>
            <!-- Bot√≥n de cerrar sesi√≥n -->
    <a href="{{ url_for('logout') }}"
   class="bg-white text-black px-3 py-1 rounded-full flex items-center space-x-2 hover:bg-gray-200 transition">
  <i class="fas fa-sign-out-alt text-lab-purple"></i>
  <span class="text-sm font-medium">Cerrar sesi√≥n</span>
</a>
        </header>

        <div class="p-6 overflow-y-auto h-full">
          <!-- Search and Action Buttons -->
          <div class="mb-6 flex justify-between items-center">
            <div class="flex items-center space-x-4">
              <div class="relative">
                <i
                  class="fas fa-search absolute left-3 top-3 text-gray-400"
                ></i>
                <input
                  type="text"
                  placeholder="Buscar producto"
                  class="pl-10 pr-4 py-2 border border-gray-300 rounded-full w-80 focus:outline-none focus:ring-2 focus:ring-lab-purple"
                  id="searchInput"
                />
              </div>
              <div class="flex items-center space-x-2">
                <i class="fas fa-chart-line text-blue-500 text-2xl"></i>
                <i class="fas fa-chart-bar text-orange-500 text-2xl"></i>
              </div>
              <div class="flex items-center space-x-4 mb-4">
  <button id="btnMateriales" class="bg-lab-purple text-white px-4 py-2 rounded-lg hover:bg-lab-purple-dark transition">
    Materiales
  </button>
  <button id="btnReactivos" class="bg-gray text-black px-4 py-2 rounded-lg hover:bg-lab-purple-dark transition">
    Reactivos
  </button>
  <button id="btnAlertas" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition">
    Ver alertas
  </button>
</div>
            </div>
          </div>

          <!-- Color Buttons (solo para Reactivos) -->
          <div id="colorButtons" class="flex space-x-2 mt-4 hidden">
            <button id="btnMostrarTodos" class="bg-gray-400 text-white px-3 py-1 rounded">Todos</button>
            <button class="bg-green-500 text-white px-3 py-1 rounded">
              Verde
            </button>
            <button class="bg-yellow-800 text-white px-3 py-1 rounded">
              Caf√©
            </button>
            <button class="bg-blue-500 text-white px-3 py-1 rounded">
              Azul
            </button>
            <button class="bg-yellow-400 text-white px-3 py-1 rounded">
              Amarillo
            </button>
            <button
              class="bg-white border border-gray-400 px-3 py-1 rounded text-gray-700"
            >
              Blanco
            </button>
            <button class="bg-red-500 text-white px-3 py-1 rounded">
              Rojo
            </button>
          </div>

         



          <!-- Tabla de Materiales -->
<div id="tablaMateriales" class="bg-white rounded-lg shadow mt-4">
  <div class="overflow-x-auto">
    <div class="max-h-[400px] overflow-y-auto">  <!-- üîπ Scroll vertical -->
      <table class="w-full">
            <thead class="bg-lab-table text-black">
                <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium uppercase">Nombre</th>
                    <th class="px-6 py-3 text-left text-xs font-medium uppercase">Cantidad</th>
                    <th class="px-6 py-3 text-left text-xs font-medium uppercase">Cantidad disponible</th>
                    <th class="px-6 py-3 text-left text-xs font-medium uppercase">Localizaci√≥n</th>
                    <th class="px-6 py-3 text-left text-xs font-medium uppercase">Capacidad</th>
                    <th class="px-6 py-3 text-left text-xs font-medium uppercase">Fecha de ingreso</th>
                    <th class="px-6 py-3 text-left text-xs font-medium uppercase">Observaciones</th>
                    <th class="px-6 py-3 text-left text-xs font-medium uppercase">Acciones</th>
                </tr>
            </thead>
            <tbody>
                {% for m in materiales %}
                <tr class="hover:bg-gray-50">
                    <td class="px-6 py-4 text-sm text-gray-900">{{ m.nombre }}</td>
                    <td class="px-6 py-4 text-sm text-gray-900">{{ m.cantidad }}</td>
                    <td class="px-6 py-4 text-sm text-gray-900">{{ m.cantidad_disponible }}</td>
                    <td class="px-6 py-4 text-sm text-gray-900">{{ m.localizacion }}</td>
                    <td class="px-6 py-4 text-sm text-gray-900">{{ m.capacidad }}</td>
                    <td class="px-6 py-4 text-sm text-gray-900">{{ m.fecha_ingreso }}</td>
                    <td class="px-6 py-4 text-sm text-gray-900">{{ m.observaciones }}</td>
                    <td class="px-6 py-4 text-sm text-gray-500">
    <button 
  class="text-blue-600 hover:text-blue-900 mr-3 btn-editar"
  data-tipo="material"
  data-codigo="{{ m.codigo_barras }}"
  data-nombre="{{ m.nombre }}"
  data-cantidad="{{ m.cantidad }}"
  data-cantidad_disponible="{{ m.cantidad_disponible }}"
  data-localizacion="{{ m.localizacion }}"
  data-capacidad="{{ m.capacidad }}"
  data-fecha_ingreso="{{ m.fecha_ingreso }}"
  data-observaciones="{{ m.observaciones }}">
  <i class="fas fa-edit"></i>
</button>


</td>

                </tr>
                {% endfor %}
            </tbody>
              </table>
    </div>
  </div>
</div>




<!-- Tabla de Reactivos -->
<div id="tablaReactivos" class="bg-white rounded-lg shadow mt-4 hidden">
  <div class="overflow-x-auto">
    <div class="max-h-[400px] overflow-y-auto"> <!-- üîπ Scroll vertical -->
      <table class="w-full">
            <thead class="bg-lab-table text-black">
                <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium uppercase">Nombre</th>
                    <th class="px-6 py-3 text-left text-xs font-medium uppercase">Color</th>
                    <th class="px-6 py-3 text-left text-xs font-medium uppercase">Cantidad</th>
                    <th class="px-6 py-3 text-left text-xs font-medium uppercase">Cantidad en buen estado</th>
                    <th class="px-6 py-3 text-left text-xs font-medium uppercase">Cantidad disponible</th>
                    <th class="px-6 py-3 text-left text-xs font-medium uppercase">Localizaci√≥n</th>
                    <th class="px-6 py-3 text-left text-xs font-medium uppercase">Capacidad</th>
                    <th class="px-6 py-3 text-left text-xs font-medium uppercase">Fecha de ingreso</th>
                    <th class="px-6 py-3 text-left text-xs font-medium uppercase">Fecha de caducidad</th>
                    <th class="px-6 py-3 text-left text-xs font-medium uppercase">Acciones</th>
                </tr>
            </thead>
            <tbody>
  {% for r in reactivos %}
  <tr class="hover:bg-gray-50" data-color="{{ r.color|lower }}">
      <td class="px-6 py-4 text-sm text-gray-900">{{ r.nombre }}</td>
      <td class="px-6 py-4 text-sm text-gray-500">{{ r.color }}</td>
      <td class="px-6 py-4 text-sm text-gray-900">{{ r.cantidad }}</td>
      <td class="px-6 py-4 text-sm text-gray-900">{{ r.cantidad_buen_estado }}</td>
      <td class="px-6 py-4 text-sm text-gray-900">{{ r.cantidad_disponible }}</td>
      <td class="px-6 py-4 text-sm text-gray-500">{{ r.localizacion }}</td>
      <td class="px-6 py-4 text-sm text-gray-500">{{ r.capacidad }}</td>
      <td class="px-6 py-4 text-sm text-gray-500">{{ r.fecha_ingreso }}</td>
      <td class="px-6 py-4 text-sm text-gray-500">{{ r.fecha_caducidad }}</td>
      <td class="px-6 py-4 text-sm text-gray-500">
    <button 
  class="text-blue-600 hover:text-blue-900 mr-3 btn-editar"
  data-tipo="reactivo"
  data-codigo="{{ r.codigo_barras }}"
  data-nombre="{{ r.nombre }}"
  data-color="{{ r.color }}"
  data-cantidad="{{ r.cantidad }}"
  data-cantidad_buen_estado="{{ r.cantidad_buen_estado }}"
  data-cantidad_disponible="{{ r.cantidad_disponible }}"
  data-localizacion="{{ r.localizacion }}"
  data-capacidad="{{ r.capacidad }}"
  data-fecha_ingreso="{{ r.fecha_ingreso }}"
  data-fecha_caducidad="{{ r.fecha_caducidad }}">
  <i class="fas fa-edit"></i>
</button>


</td>

  </tr>
  {% endfor %}
</tbody>

              </table>
    </div>
  </div>
</div>



          <!-- Descargar -->
          <div class="mt-6">
            <button
              class="bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition-colors"
            >
              <i class="fas fa-download mr-2"></i>Descargar excel
            </button>
          </div>
        </div>
      </main>
    </div>

<!-- Modal de Alertas -->
<div id="modalAlertas" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
  <div class="bg-white rounded-lg shadow-lg w-[600px] max-h-[80vh] overflow-y-auto p-6">
    <h2 class="text-2xl font-bold text-gray-800 mb-4 text-center">‚ö†Ô∏è Alertas de inventario</h2>

    {% if stock_bajo_materiales or caducidad_proxima_materiales or stock_bajo_reactivos or caducidad_proxima_reactivos %}
    <div class="bg-yellow-50 border-l-4 border-yellow-500 p-4 mb-4 rounded shadow">

      <!-- üîπ MATERIALES -->
      {% if stock_bajo_materiales or caducidad_proxima_materiales %}
      <div class="mb-3">
        <p class="font-semibold text-yellow-700">üß™ Materiales:</p>

        {% if stock_bajo_materiales %}
        <ul class="list-disc ml-6 text-yellow-900 mb-2">
          <li class="font-semibold">Stock bajo:</li>
          {% for item in stock_bajo_materiales %}
            <li>{{ item.nombre }} ‚Äî Stock actual: {{ item.cantidad }} (m√≠nimo: {{ item.minimo }})</li>
          {% endfor %}
        </ul>
        {% endif %}

        {% if caducidad_proxima_materiales %}
        <ul class="list-disc ml-6 text-orange-800">
          <li class="font-semibold">Pr√≥ximos a caducar:</li>
          {% for item in caducidad_proxima_materiales %}
            <li>{{ item.nombre }} ({{ item.fecha_caducidad }})</li>
          {% endfor %}
        </ul>
        {% endif %}
      </div>
      {% endif %}

      <!-- üîπ REACTIVOS -->
      {% if stock_bajo_reactivos or caducidad_proxima_reactivos %}
      <div>
        <p class="font-semibold text-yellow-700">‚öóÔ∏è Reactivos:</p>

        {% if stock_bajo_reactivos %}
        <ul class="list-disc ml-6 text-yellow-900 mb-2">
          <li class="font-semibold">Stock bajo:</li>
          {% for item in stock_bajo_reactivos %}
            <li>{{ item.nombre }} ‚Äî Stock actual: {{ item.cantidad }} (m√≠nimo: {{ item.minimo }})</li>
          {% endfor %}
        </ul>
        {% endif %}

        {% if caducidad_proxima_reactivos %}
        <ul class="list-disc ml-6 text-orange-800">
          <li class="font-semibold">Pr√≥ximos a caducar:</li>
          {% for item in caducidad_proxima_reactivos %}
            <li>{{ item.nombre }} ({{ item.fecha_caducidad }})</li>
          {% endfor %}
        </ul>
        {% endif %}
      </div>
      {% endif %}
    </div>
    {% else %}
      <p class="text-gray-600 text-center">‚úÖ No hay alertas por el momento.</p>
    {% endif %}

    <div class="text-center mt-6">
      <button id="cerrarModalAlertas" class="bg-lab-purple text-white px-5 py-2 rounded-lg hover:bg-lab-purple-dark transition">
        Cerrar
      </button>
    </div>
  </div>
</div>

<!-- Modal para editar producto -->
<div id="modalEditar" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
  <div class="bg-white rounded-xl shadow-xl w-[90%] max-w-[600px] max-h-[90vh] overflow-y-auto p-6">
    <h2 class="text-2xl font-bold mb-4 text-lab-purple text-center">‚úèÔ∏è Editar producto</h2>

    <form id="formEditar" class="space-y-3">
      <input type="hidden" id="editTipo" />

      <div>
        <label class="block text-sm font-medium text-gray-700">C√≥digo de barras</label>
        <input type="text" id="editCodigo" class="w-full border px-3 py-2 rounded bg-gray-100" readonly />
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">Nombre</label>
        <input type="text" id="editNombre" class="w-full border px-3 py-2 rounded" />
      </div>

      <!-- Solo Reactivos -->
      <div id="campoColor" class="hidden">
        <label for="editColor" class="block text-sm font-medium text-gray-700 mb-1">Color</label>
<select id="editColor" name="color" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-lab-purple focus:border-lab-purple">
  <option value="" disabled selected>Selecciona un color</option>
  <option value="verde">Verde</option>
  <option value="caf√©">Caf√©</option>
  <option value="azul">Azul</option>
  <option value="amarillo">Amarillo</option>
  <option value="blanco">Blanco</option>
  <option value="rojo">Rojo</option>
</select>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">Cantidad total</label>
        <input type="number" id="editCantidad" class="w-full border px-3 py-2 rounded" />
      </div>

      <!-- Solo Reactivos -->
      <div id="campoBuenEstado" class="hidden">
        <label class="block text-sm font-medium text-gray-700">Cantidad en buen estado</label>
        <input type="number" id="editCantidadBuenEstado" class="w-full border px-3 py-2 rounded" />
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">Cantidad disponible</label>
        <input type="number" id="editCantidadDisponible" class="w-full border px-3 py-2 rounded" />
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">Localizaci√≥n</label>
        <input type="text" id="editLocalizacion" class="w-full border px-3 py-2 rounded" />
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">Capacidad</label>
        <input type="text" id="editCapacidad" class="w-full border px-3 py-2 rounded" />
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">Fecha de ingreso</label>
        <input type="date" id="editFechaIngreso" class="w-full border px-3 py-2 rounded" />
      </div>

      <!-- Solo Reactivos -->
      <div id="campoCaducidad" class="hidden">
        <label class="block text-sm font-medium text-gray-700">Fecha de caducidad</label>
        <input type="date" id="editFechaCaducidad" class="w-full border px-3 py-2 rounded" />
      </div>

      <div id="campoObservaciones">
        <label class="block text-sm font-medium text-gray-700">Observaciones</label>
        <textarea id="editObservaciones" class="w-full border px-3 py-2 rounded"></textarea>
      </div>

      <div class="flex justify-end space-x-3 mt-6 sticky bottom-0 bg-white py-2 border-t border-gray-200">
        <button type="button" id="cancelarEditar" class="px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">Cancelar</button>
        <button type="submit" class="px-4 py-2 bg-lab-purple text-white rounded hover:bg-lab-purple-dark">Guardar cambios</button>
      </div>
    </form>
  </div>
</div>


<script>
  const modalEditar = document.getElementById('modalEditar');
  const formEditar = document.getElementById('formEditar');
  const cancelarEditar = document.getElementById('cancelarEditar');

  // Mostrar el modal con los datos correctos
  document.querySelectorAll('.btn-editar').forEach(btn => {
    btn.addEventListener('click', () => {
      const tipo = btn.dataset.tipo;
      document.getElementById('editTipo').value = tipo;

      // Campos visibles solo para reactivos
      const isReactivo = tipo === "reactivo";
      document.getElementById('campoColor').classList.toggle('hidden', !isReactivo);
      document.getElementById('campoBuenEstado').classList.toggle('hidden', !isReactivo);
      document.getElementById('campoCaducidad').classList.toggle('hidden', !isReactivo);

      // Cargar datos generales
      document.getElementById('editCodigo').value = btn.dataset.codigo;
      document.getElementById('editNombre').value = btn.dataset.nombre;
      document.getElementById('editCantidad').value = btn.dataset.cantidad || '';
      document.getElementById('editCantidadDisponible').value = btn.dataset.cantidad_disponible || '';
      document.getElementById('editLocalizacion').value = btn.dataset.localizacion || '';
      document.getElementById('editCapacidad').value = btn.dataset.capacidad || '';
      document.getElementById('editFechaIngreso').value = btn.dataset.fecha_ingreso || '';
      document.getElementById('editObservaciones').value = btn.dataset.observaciones || '';

      // Datos espec√≠ficos de reactivos
      if (isReactivo) {
        document.getElementById('editColor').value = btn.dataset.color || '';
        document.getElementById('editCantidadBuenEstado').value = btn.dataset.cantidad_buen_estado || '';
        document.getElementById('editFechaCaducidad').value = btn.dataset.fecha_caducidad || '';
      }

      modalEditar.classList.remove('hidden');
    });
  });

  // Cerrar modal
  cancelarEditar.addEventListener('click', () => {
    modalEditar.classList.add('hidden');
  });

  // Guardar cambios
  formEditar.addEventListener('submit', async (e) => {
    e.preventDefault();

    const tipo = document.getElementById('editTipo').value;

    const data = {
      tipo: tipo,
      codigo_barras: document.getElementById('editCodigo').value,
      nombre: document.getElementById('editNombre').value,
      cantidad: document.getElementById('editCantidad').value,
      cantidad_disponible: document.getElementById('editCantidadDisponible').value,
      localizacion: document.getElementById('editLocalizacion').value,
      capacidad: document.getElementById('editCapacidad').value,
      fecha_ingreso: document.getElementById('editFechaIngreso').value,
      observaciones: document.getElementById('editObservaciones').value
    };

    if (tipo === "reactivo") {
      data.color = document.getElementById('editColor').value;
      data.cantidad_buen_estado = document.getElementById('editCantidadBuenEstado').value;
      data.fecha_caducidad = document.getElementById('editFechaCaducidad').value;
    }

    const resp = await fetch('/actualizar_inventario', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });

    const result = await resp.json();
    if (result.success) {
      alert('‚úÖ Producto actualizado correctamente.');
      modalEditar.classList.add('hidden');
      location.reload();
    } else {
      alert('‚ö†Ô∏è Error al actualizar el producto.');
    }
  });
</script>




<script>
  const btnMateriales = document.getElementById("btnMateriales");
  const btnReactivos = document.getElementById("btnReactivos");
  const tablaMateriales = document.getElementById("tablaMateriales");
  const tablaReactivos = document.getElementById("tablaReactivos");
  const colorButtons = document.getElementById("colorButtons");

  // üîπ Alternar entre Materiales y Reactivos
  btnMateriales.addEventListener("click", () => {
    tablaMateriales.classList.remove("hidden");
    tablaReactivos.classList.add("hidden");
    colorButtons.classList.add("hidden");

    btnMateriales.classList.add("bg-lab-purple", "text-white");
    btnMateriales.classList.remove("bg-gray-200", "text-gray-700");
    btnReactivos.classList.add("bg-gray-200", "text-gray-700");
    btnReactivos.classList.remove("bg-lab-purple", "text-white");
  });

  btnReactivos.addEventListener("click", () => {
    tablaReactivos.classList.remove("hidden");
    tablaMateriales.classList.add("hidden");
    colorButtons.classList.remove("hidden");

    btnReactivos.classList.add("bg-lab-purple", "text-white");
    btnReactivos.classList.remove("bg-gray-200", "text-gray-700");
    btnMateriales.classList.add("bg-gray-200", "text-gray-700");
    btnMateriales.classList.remove("bg-lab-purple", "text-white");
  });


  // üîπ Filtro por color (para reactivos)
  const colorButtonsContainer = document.getElementById("colorButtons");
  const reactivoRows = document.querySelectorAll("#tablaReactivos tbody tr");

  colorButtonsContainer.querySelectorAll("button").forEach((btn) => {
    btn.addEventListener("click", () => {
      const color = btn.textContent.trim().toLowerCase();

      reactivoRows.forEach((row) => {
        const rowColor = row.dataset.color?.toLowerCase() || "";
        if (color === "todos") {
          row.style.display = "";
        } else if (color === "blanco") {
          row.style.display = rowColor === "blanco" ? "" : "none";
        } else {
          row.style.display = rowColor.includes(color) ? "" : "none";
        }
      });
    });
  });

  // üîπ B√∫squeda din√°mica
  document.getElementById("searchInput").addEventListener("input", (e) => {
    const searchTerm = e.target.value.toLowerCase();
    const visibleTable = tablaMateriales.classList.contains("hidden")
      ? tablaReactivos
      : tablaMateriales;
    const rows = visibleTable.querySelectorAll("tbody tr");
    rows.forEach((row) => {
      const text = row.textContent.toLowerCase();
      row.style.display = text.includes(searchTerm) ? "" : "none";
    });
  });


  const btnAlertas = document.getElementById('btnAlertas');
  const modalAlertas = document.getElementById('modalAlertas');
  const cerrarModalAlertas = document.getElementById('cerrarModalAlertas');

  btnAlertas.addEventListener('click', () => {
    modalAlertas.classList.remove('hidden');
  });

  cerrarModalAlertas.addEventListener('click', () => {
    modalAlertas.classList.add('hidden');
  });

  // Cerrar el modal si se hace clic fuera del contenido
  modalAlertas.addEventListener('click', (e) => {
    if (e.target === modalAlertas) {
      modalAlertas.classList.add('hidden');
    }
  });

fetch('/guardar_producto', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify(data)
})
  .then(res => res.json())
  .then(response => {
    alert(response.message);
    location.reload();
  });

</script>

 


  </body>
</html>
